# 农场模拟经营游戏 - 精简核心玩法循环图

## 核心玩法循环（最简版）

```mermaid
graph TD
    A[开始游戏] --> B[获得初始资源]
    B --> C{选择行动}
    
    %% 核心循环
    C --> D[种植作物]
    C --> E[采集资源]
    C --> F[与NPC交易]
    
    D --> G[等待收获]
    E --> H[获得物品]
    F --> H
    G --> H
    
    H --> I{资源充足?}
    I -->|否| J[出售物品]
    I -->|是| K[扩展经营]
    
    J --> L[获得金币]
    L --> C
    K --> M[解锁新内容]
    M --> C
    
    %% 样式设置
    style A fill:#e1f5fe
    style C fill:#fff3e0
    style H fill:#4caf50
    style L fill:#ffeb3b
    style M fill:#2196f3
    
    classDef coreAction fill:#81c784,stroke:#388e3c,stroke-width:3px
    classDef decision fill:#ff9800,stroke:#f57c00,stroke-width:2px
    classDef reward fill:#ffc107,stroke:#ff8f00,stroke-width:2px
    
    class D,E,F coreAction
    class C,I decision
    class L,M reward
```

## 详细核心循环（中等复杂度）

```mermaid
graph LR
    A[种植] --> B[收获]
    B --> C[出售]
    C --> D[购买种子/工具]
    D --> A
    
    B --> E[与NPC交易]
    E --> F[获得金币]
    F --> D
    
    C --> G[扩展农场]
    G --> H[提升效率]
    H --> A
    
    style A fill:#4caf50
    style B fill:#8bc34a
    style C fill:#ffeb3b
    style D fill:#2196f3
    style E fill:#9c27b0
    style F fill:#ff9800
    style G fill:#607d8b
    style H fill:#795548
```

## 系统交互核心循环

```mermaid
graph TD
    A[玩家行动] --> B[时间推进]
    B --> C[作物生长]
    C --> D[NPC行为更新]
    D --> E[市场变化]
    E --> F[新的机会]
    F --> A
    
    style A fill:#2196f3
    style B fill:#ff9800
    style C fill:#4caf50
    style D fill:#9c27b0
    style E fill:#f44336
    style F fill:#ffeb3b
```

## 核心玩法要素（最简化）

### 🌱 **种植循环**
**播种** → **等待** → **收获** → **出售** → **再投资**

### 💰 **经济循环**  
**获得物品** → **出售获利** → **购买升级** → **提升效率**

### 🤝 **社交循环**
**与NPC交互** → **完成交易** → **解锁内容** → **获得优势**

### ⏰ **时间循环**
**日夜更替** → **作物成熟** → **NPC活动** → **新的一天**

## 核心设计理念

1. **简单易懂**：玩家可以快速理解基本循环
2. **自我强化**：每个行动都能带来进步
3. **多路径选择**：种植、采集、交易三条主线
4. **持续激励**：短期收获与长期目标结合

这个精简版本突出了游戏的核心循环，去除了复杂的分支，让玩家能够清晰地看到游戏的基本玩法逻辑。

# 精简版系统架构图

## 1. 精简系统架构图

```mermaid
graph TB
    subgraph "表现层"
        UI[游戏UI界面]
        Input[玩家输入]
    end
    
    subgraph "业务逻辑层"
        Player[角色系统]
        NPC[NPC系统]
        Farm[农场系统]
        Trade[交易系统]
        Time[时间系统]
    end
    
    subgraph "核心算法"
        AStar[A*寻路]
        AI[行为AI]
        Event[事件系统]
    end
    
    subgraph "Unity引擎"
        Physics[物理引擎]
        Animation[动画系统]
        Tilemap[地图系统]
    end
    
    Input --> Player
    UI --> Trade
    UI --> Farm
    
    Player --> Time
    NPC --> AStar
    NPC --> AI
    Farm --> Event
    
    AStar --> Tilemap
    AI --> Animation
    Event --> Physics
    
    style UI fill:#e3f2fd
    style Player fill:#e8f5e8
    style NPC fill:#e8f5e8
    style AStar fill:#fff3e0
    style AI fill:#fff3e0
```

## 2. 核心技术栈图

```mermaid
graph LR
    subgraph "开发环境"
        Unity[Unity 2022]
        VS[Visual Studio]
    end
    
    subgraph "核心技术"
        Csharp[C# 脚本]
        Tilemap[Tilemap系统]
        Animator[动画控制器]
    end
    
    subgraph "优化技术"
        Pool[对象池]
        Job[Job System]
        SO[ScriptableObject]
    end
    
    Unity --> Csharp
    Unity --> Tilemap
    Unity --> Animator
    
    Csharp --> Pool
    Csharp --> Job
    Csharp --> SO
    
    style Unity fill:#4caf50
    style Csharp fill:#2196f3
    style Pool fill:#ff9800
```

## 3. 简化的玩法循环

```mermaid
graph LR
    A[玩家操作] --> B[系统处理]
    B --> C[状态更新]
    C --> D[界面反馈]
    D --> A
    
    style A fill:#e3f2fd
    style B fill:#e8f5e8
    style C fill:#fff3e0
    style D fill:#fce4ec
```

## 4. NPC核心状态

```mermaid
stateDiagram-v2
    [*] --> 空闲
    空闲 --> 移动 : 收到指令
    空闲 --> 工作 : 工作时间
    移动 --> 空闲 : 到达目标
    工作 --> 空闲 : 完成任务
    空闲 --> 对话 : 玩家交互
    对话 --> 空闲 : 结束对话
```

## 5. 性能优化要点

```mermaid
graph TB
    subgraph "优化前"
        B1[计算耗时: 4.2ms]
        B2[内存占用高]
        B3[帧率不稳定]
    end
    
    subgraph "优化技术"
        O1[对象池]
        O2[路径缓存]
        O3[分帧计算]
    end
    
    subgraph "优化后"
        A1[计算耗时: 0.8ms]
        A2[内存降低65%]
        A3[稳定60FPS]
    end
    
    B1 --> O2 --> A1
    B2 --> O1 --> A2
    B3 --> O3 --> A3
    
    style B1 fill:#ffcdd2
    style B2 fill:#ffcdd2
    style B3 fill:#ffcdd2
    style A1 fill:#c8e6c9
    style A2 fill:#c8e6c9
    style A3 fill:#c8e6c9
``` 